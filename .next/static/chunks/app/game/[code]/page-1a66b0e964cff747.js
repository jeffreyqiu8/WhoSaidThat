(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{2327:(e,t,s)=>{"use strict";s.d(t,{J5:()=>n,u1:()=>l,uE:()=>i});let r={maxRetries:3,retryDelay:1e3,backoffMultiplier:2,retryableStatuses:[408,429,500,502,503,504]};function a(e){return new Promise(t=>setTimeout(t,e))}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={...r,...s},l=null;for(let s=0;s<=n.maxRetries;s++)try{let r=await fetch(e,t);if(r.ok||!n.retryableStatuses.includes(r.status))return r;let i=Error("HTTP ".concat(r.status,": ").concat(r.statusText));i.status=r.status;try{i.data=await r.json()}catch(e){}if(l=i,s===n.maxRetries)throw i;let c=n.retryDelay*Math.pow(n.backoffMultiplier,s);console.log("Request failed with status ".concat(r.status,". Retrying in ").concat(c,"ms... (attempt ").concat(s+1,"/").concat(n.maxRetries,")")),await a(c)}catch(t){var i;if(l=t,s===n.maxRetries||(i=n.retryableStatuses,!(!t.status||i.includes(t.status))))throw t;let e=n.retryDelay*Math.pow(n.backoffMultiplier,s);console.log("Request failed: ".concat(t.message,". Retrying in ").concat(e,"ms... (attempt ").concat(s+1,"/").concat(n.maxRetries,")")),await a(e)}throw l||Error("Request failed after retries")}function l(e){if(e instanceof Error){var t;if(null==(t=e.data)?void 0:t.error)return e.data.error;if(e.status)switch(e.status){case 400:return"Invalid request. Please check your input.";case 401:return"You are not authorized to perform this action.";case 403:return"Access denied.";case 404:return"Resource not found.";case 408:return"Request timeout. Please try again.";case 409:return"Conflict. The resource already exists or is in an invalid state.";case 429:return"Too many requests. Please slow down and try again.";case 500:return"Server error. Please try again later.";case 502:case 503:case 504:return"Service temporarily unavailable. Please try again."}return e.message||"An unexpected error occurred."}return"An unexpected error occurred."}let i={async post(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=await n(e,{method:"POST",headers:{"Content-Type":"application/json",...s.headers},body:JSON.stringify(t),...s},r);if(!a.ok){let e=Error("HTTP ".concat(a.status,": ").concat(a.statusText));e.status=a.status;try{e.data=await a.json()}catch(e){}throw e}return a.json()},async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r=await n(e,{method:"GET",...t},s);if(!r.ok){let e=Error("HTTP ".concat(r.status,": ").concat(r.statusText));e.status=r.status;try{e.data=await r.json()}catch(e){}throw e}return r.json()}}},2573:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var r=s(5155),a=s(63),n=s(2115),l=s(1183),i=s.n(l);s(6699),s(5704);var c=function(e){return e.PLAYER_JOINED="playerJoined",e.PLAYER_DISCONNECTED="playerDisconnected",e.PROMPT_STARTED="promptStarted",e.RESPONSES_READY="responsesReady",e.RESULTS_READY="resultsReady",e.GAME_ENDED="gameEnded",e}({});let o=null;function d(){return o||(o=new(i())("",{cluster:""})),o}function m(e){return"game-".concat(e)}function x(e){let t=d(),s=m(e);t.unsubscribe(s)}function u(e){let{message:t,onDismiss:s}=e,[a,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{l(!0),setTimeout(()=>s(t.id),300)},t.duration||5e3);return()=>clearTimeout(e)},[t,s]),(0,r.jsxs)("div",{className:"".concat((()=>{switch(t.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-orange-500 text-white";default:return"bg-blue-500 text-white"}})()," px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-lg flex items-center gap-2 sm:gap-3 min-w-[280px] sm:min-w-[300px] max-w-[calc(100vw-2rem)] sm:max-w-md transition-all duration-300 ").concat(a?"opacity-0 translate-x-full":"opacity-100 translate-x-0"),children:[(0,r.jsx)("span",{className:"text-lg sm:text-xl flex-shrink-0",children:(()=>{switch(t.type){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}})()}),(0,r.jsx)("p",{className:"font-medium flex-1 text-sm sm:text-base break-words",children:t.message}),(0,r.jsx)("button",{onClick:()=>{l(!0),setTimeout(()=>s(t.id),300)},className:"text-white hover:text-gray-200 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center flex-shrink-0",children:"✕"})]})}function p(e){let{messages:t,onDismiss:s}=e;return(0,r.jsx)("div",{className:"fixed top-2 sm:top-4 right-2 sm:right-4 z-50 flex flex-col gap-2 sm:gap-3",children:t.map(e=>(0,r.jsx)(u,{message:e,onDismiss:s},e.id))})}let h=[];function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0,r={id:"".concat(Date.now(),"-").concat(Math.random()),message:e,type:t,duration:s};h.forEach(e=>e(r))}function b(){let e=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0;g(e,t,s)},[]),t=(0,n.useCallback)((e,t)=>{g(e,"success",t)},[]),s=(0,n.useCallback)((e,t)=>{g(e,"error",t)},[]);return{toast:e,success:t,error:s,warning:(0,n.useCallback)((e,t)=>{g(e,"warning",t)},[]),info:(0,n.useCallback)((e,t)=>{g(e,"info",t)},[])}}var y=s(2327);let f=(0,n.createContext)(void 0);function j(e){let{gameCode:t,currentPlayerId:s,children:a}=e,[l,i]=(0,n.useState)(null),[o,u]=(0,n.useState)("connecting"),[g,b]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[C,S]=(0,n.useState)([]),k=(0,n.useRef)(null),E=(0,n.useRef)(null),R=(0,n.useRef)(0),D=(0,n.useRef)(!1),P=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0,r="".concat(Date.now(),"-").concat(Math.random());S(a=>[...a,{id:r,message:e,type:t,duration:s}])},[]),A=(0,n.useCallback)(e=>{S(t=>t.filter(t=>t.id!==e))},[]);(0,n.useEffect)(()=>{var e;return e=e=>{S(t=>[...t,e])},h.push(e),()=>{let t=h.indexOf(e);t>-1&&h.splice(t,1)}},[]);let T=(0,n.useCallback)(async()=>{try{let e=await (0,y.J5)("/api/game/".concat(t),{},{maxRetries:2,retryDelay:500});if(!e.ok)return void(404===e.status?b("Game not found"):b("Failed to load game"));let s=await e.json(),r={...s,players:new Map(Object.entries(s.players).map(e=>{let[t,s]=e;return[t,{...s,joinedAt:new Date(s.joinedAt)}]})),rounds:s.rounds.map(e=>({...e,responses:new Map(Object.entries(e.responses||{}).map(e=>{let[t,s]=e;return[t,{...s,submittedAt:new Date(s.submittedAt)}]})),guesses:new Map(Object.entries(e.guesses||{}).map(e=>{let[t,s]=e;return[t,{...s,guesses:new Map(Object.entries(s.guesses||{})),submittedAt:new Date(s.submittedAt)}]})),results:e.results?{responses:e.results.responses.map(e=>({...e,guessedBy:new Map(Object.entries(e.guessedBy||{}))})),penalties:new Map(Object.entries(e.results.penalties||{}))}:void 0})),createdAt:new Date(s.createdAt),expiresAt:new Date(s.expiresAt)};i(r),b(null)}catch(t){console.error("Error fetching game state:",t);let e=(0,y.u1)(t);b(e),P(e,"error")}},[t,P]),O=(0,n.useCallback)(async()=>{if(s&&!D.current){D.current=!0;try{await fetch("/api/game/".concat(t,"/disconnect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:s})})}catch(e){console.error("Error notifying disconnect:",e)}}},[t,s]),I=(0,n.useCallback)(()=>{if(R.current>=10){u("disconnected"),b("Unable to reconnect. Please refresh the page."),O();return}let e=Math.min(1e3*Math.pow(2,R.current),3e4);R.current+=1,u("reconnecting"),E.current=setTimeout(()=>{console.log("Reconnection attempt ".concat(R.current,"/").concat(10)),k.current&&(x(t),k.current=null),M()},e)},[t,O]),M=(0,n.useCallback)(()=>{try{let e=function(e){let t=d(),s=m(e);return t.subscribe(s)}(t);k.current=e,e.bind("pusher:subscription_succeeded",()=>{console.log("Successfully subscribed to game channel"),u("connected"),R.current=0,T()}),e.bind("pusher:subscription_error",e=>{console.error("Subscription error:",e),u("disconnected"),I()}),e.bind(c.PLAYER_JOINED,e=>{console.log("Player joined:",e),T()}),e.bind(c.PROMPT_STARTED,e=>{console.log("Prompt started:",e),T()}),e.bind(c.RESPONSES_READY,e=>{console.log("Responses ready:",e),T()}),e.bind(c.RESULTS_READY,e=>{console.log("Results ready:",e),T()}),e.bind(c.GAME_ENDED,e=>{console.log("Game ended:",e),N(!0),w(e.reason),T()}),e.bind(c.PLAYER_DISCONNECTED,e=>{if(console.log("Player disconnected:",e),e.playerId!==s){let t="".concat(e.nickname," has disconnected");e.wasHost&&e.newHostNickname?(t+=". ".concat(e.newHostNickname," is now the host."),P(t,"warning",7e3)):P(t,"info",5e3)}T()}),u("connected")}catch(e){console.error("Error setting up real-time connection:",e),u("disconnected"),I()}},[t,T,I]);return(0,n.useEffect)(()=>{M();let e=()=>{document.hidden?console.log("Page hidden - potential disconnect"):(D.current=!1,"connected"===o&&T())},r=()=>{if(s&&!D.current){let e=JSON.stringify({playerId:s});navigator.sendBeacon("/api/game/".concat(t,"/disconnect"),e),D.current=!0}};return document.addEventListener("visibilitychange",e),window.addEventListener("beforeunload",r),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("beforeunload",r),O(),k.current&&(x(t),k.current=null),E.current&&(clearTimeout(E.current),E.current=null)}},[t,M,s,O,o,T]),(0,r.jsxs)(f.Provider,{value:{gameSession:l,connectionStatus:o,error:g,isGameEnded:j,gameEndedReason:v,refreshGameState:T},children:[(0,r.jsx)(p,{messages:C,onDismiss:A}),a]})}function N(){let e=(0,n.useContext)(f);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}function v(e){let{status:t}=e,s=(()=>{switch(t){case"connected":return{icon:"\uD83D\uDFE2",text:"Connected",bgColor:"bg-green-500",textColor:"text-white"};case"connecting":return{icon:"\uD83D\uDFE1",text:"Connecting...",bgColor:"bg-yellow-500",textColor:"text-white"};case"reconnecting":return{icon:"\uD83D\uDFE0",text:"Reconnecting...",bgColor:"bg-orange-500",textColor:"text-white"};case"disconnected":return{icon:"\uD83D\uDD34",text:"Disconnected",bgColor:"bg-red-500",textColor:"text-white"};default:return{icon:"⚪",text:"Unknown",bgColor:"bg-gray-500",textColor:"text-white"}}})();return"connected"===t?null:(0,r.jsx)("div",{className:"fixed top-2 sm:top-4 left-2 sm:left-4 z-50",children:(0,r.jsxs)("div",{className:"".concat(s.bgColor," ").concat(s.textColor," px-3 sm:px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-pulse min-h-[44px]"),children:[(0,r.jsx)("span",{className:"text-base sm:text-lg",children:s.icon}),(0,r.jsx)("span",{className:"font-semibold text-xs sm:text-sm",children:s.text})]})})}var w=s(9443);function C(e){let{gameCode:t,players:s,hostId:a,currentPlayerId:l}=e,{refreshGameState:i}=N(),[c,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(null),p=b(),h=l===a,g=s.size,f=h&&g>=4,j=async()=>{if(f){o(!0),u(null);try{await y.uE.post("/api/game/".concat(t,"/start-round"),{hostId:l,prompt:"What's the most embarrassing thing that happened to you this week?"},{},{maxRetries:2,retryDelay:1e3}),p.success("Game started!"),await i()}catch(t){console.error("Error starting game:",t);let e=(0,y.u1)(t);u(e),p.error(e)}finally{o(!1)}}},v=async()=>{if(confirm("Are you sure you want to cancel this game? All players will be disconnected.")){m(!0),u(null);try{await y.uE.post("/api/game/".concat(t,"/end"),{hostId:l},{},{maxRetries:1,retryDelay:500}),p.info("Game ended")}catch(t){console.error("Error ending game:",t);let e=(0,y.u1)(t);u(e),p.error(e),m(!1)}}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:"Game Lobby"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Waiting for players to join..."}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:g<4?"Need at least ".concat(4," players to start (").concat(g,"/").concat(4,")"):"".concat(g," players ready!")})]}),(0,r.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,r.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4",children:["Players (",g,")"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:Array.from(s.values()).map(e=>(0,r.jsx)("div",{className:"p-3 sm:p-4 rounded-lg border-2 transition-all ".concat(e.isConnected?"border-green-500 bg-green-50":"border-gray-300 bg-gray-100 opacity-75"," ").concat(e.id===l?"ring-2 ring-purple-500":""),children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,r.jsx)("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:e.isHost?"\uD83D\uDC51":"\uD83C\uDFAE"}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("p",{className:"font-semibold text-sm sm:text-base truncate ".concat(e.isConnected?"text-gray-800":"text-gray-500 line-through"),children:[e.nickname,e.id===l&&" (You)"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[e.isHost?"Host":"Player",!e.isConnected&&" - Disconnected"]})]})]}),(0,r.jsx)("div",{className:"text-right flex-shrink-0",children:(0,r.jsxs)("span",{className:"text-xs font-medium ".concat(e.isConnected?"text-green-600":"text-red-500"),children:[e.isConnected?"\uD83D\uDFE2":"\uD83D\uDD34",(0,r.jsx)("span",{className:"hidden sm:inline ml-1",children:e.isConnected?"Online":"Offline"})]})})]})},e.id))})]}),(0,r.jsxs)("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-3 sm:p-4 mb-5 sm:mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm sm:text-base text-purple-900 mb-2",children:"How to Play:"}),(0,r.jsxs)("ol",{className:"text-xs sm:text-sm text-purple-800 space-y-1 list-decimal list-inside",children:[(0,r.jsx)("li",{children:"Everyone answers the same prompt anonymously"}),(0,r.jsx)("li",{children:"Guess who wrote each response"}),(0,r.jsx)("li",{children:"Wrong guesses = drinking penalties! \uD83C\uDF7A"}),(0,r.jsx)("li",{children:"Play multiple rounds and have fun!"})]})]}),h&&(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("button",{onClick:j,disabled:!f||c||d,className:"px-6 sm:px-8 py-4 rounded-lg font-bold text-base sm:text-lg transition-all min-h-[44px] ".concat(!f||c||d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 active:bg-purple-800 hover:scale-105 shadow-lg"),children:c?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-2 text-white"}),"Starting Game..."]}):f?"Start Game! \uD83C\uDFAE":"Need ".concat(4-g," More Player").concat(4-g!=1?"s":"")}),x&&(0,r.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-3",children:x})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:v,disabled:c||d,className:"bg-red-600 text-white px-5 sm:px-6 py-2 rounded-lg font-semibold hover:bg-red-700 active:bg-red-800 transition-all disabled:bg-gray-300 disabled:cursor-not-allowed text-sm min-h-[44px]",children:d?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-2 text-white"}),"Canceling..."]}):"Cancel Game"})})]}),!h&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[(0,r.jsx)("span",{className:"animate-pulse text-xl sm:text-2xl",children:"⏳"}),(0,r.jsx)("p",{className:"text-base sm:text-lg",children:"Waiting for host to start the game..."})]})}),(0,r.jsx)("div",{className:"mt-5 sm:mt-6 pt-5 sm:pt-6 border-t-2 border-gray-200",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Share this code with friends:"}),(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2 sm:space-x-3 bg-purple-100 px-4 sm:px-6 py-2 sm:py-3 rounded-lg",children:[(0,r.jsx)("span",{className:"text-2xl sm:text-3xl font-mono font-bold text-purple-700",children:t}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t)},className:"text-purple-600 hover:text-purple-800 active:text-purple-900 transition-colors text-xl sm:text-2xl min-h-[44px] min-w-[44px] flex items-center justify-center",title:"Copy game code",children:"\uD83D\uDCCB"})]})]})})]})}function S(e){var t;let{gameSession:s,currentPlayerId:a,onRefresh:l}=e,[i,c]=(0,n.useState)(""),[o,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),h=b(),g=s.rounds[s.currentRound],f=(null==g||null==(t=g.responses)?void 0:t.size)||0,j=Array.from(s.players.values()).filter(e=>e.isConnected).length;(0,n.useEffect)(()=>{(null==g?void 0:g.responses)&&p(!!Array.from(g.responses.values()).find(e=>e.playerId===a))},[g,a]);let N=async e=>{if(e.preventDefault(),!i.trim())return void x("Please enter a response");d(!0),x(null);try{await y.uE.post("/api/game/".concat(s.code,"/response"),{playerId:a,response:i.trim()},{},{maxRetries:2,retryDelay:1e3}),p(!0),c(""),h.success("Response submitted successfully!"),l()}catch(t){console.error("Error submitting response:",t);let e=(0,y.u1)(t);x(e),h.error(e)}finally{d(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"mb-5 sm:mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:["Round ",(null==g?void 0:g.roundNumber)||s.currentRound+1]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg p-4 sm:p-6 mb-4",children:(0,r.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-800 text-center",children:(null==g?void 0:g.prompt)||"Loading prompt..."})})]}),u?(0,r.jsxs)("div",{className:"text-center py-6 sm:py-8",children:[(0,r.jsx)("div",{className:"text-5xl sm:text-6xl mb-4",children:"✅"}),(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Response Submitted!"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-5 sm:mb-6",children:"Waiting for other players to submit their responses..."}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"animate-pulse text-xl sm:text-2xl",children:"⏳"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg font-semibold text-gray-800",children:[f," / ",j," players submitted"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"bg-purple-600 h-full transition-all duration-500 ease-out",style:{width:"".concat(f/j*100,"%")}})})]})]}):(0,r.jsxs)("form",{onSubmit:N,className:"space-y-3 sm:space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),(0,r.jsx)("textarea",{id:"response",value:i,onChange:e=>c(e.target.value),placeholder:"Type your answer here...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none text-base",rows:4,maxLength:500,disabled:o}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:[i.length,"/500 characters"]})]}),m&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,r.jsx)("p",{className:"text-red-600 text-xs sm:text-sm",children:m})}),(0,r.jsx)("button",{type:"submit",disabled:o||!i.trim(),className:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 active:bg-purple-800 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed min-h-[44px]",children:o?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-3 text-white"}),"Submitting..."]}):"Submit Response"})]}),!u&&f>0&&(0,r.jsx)("div",{className:"mt-3 sm:mt-4 bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 text-center",children:[f," / ",j," players have submitted"]})})]})}function k(e){var t;let{gameSession:s,currentPlayerId:a,onRefresh:l}=e,[i,c]=(0,n.useState)(new Map),[o,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),h=b(),g=s.rounds[s.currentRound],f=(null==g?void 0:g.responses)?Array.from(g.responses.entries()):[],j=Array.from(s.players.values()),N=(null==g||null==(t=g.guesses)?void 0:t.size)||0,v=Array.from(s.players.values()).filter(e=>e.isConnected).length;(0,n.useEffect)(()=>{(null==g?void 0:g.guesses)&&p(!!g.guesses.get(a))},[g,a]);let C=async e=>{if(e.preventDefault(),i.size!==f.length)return void x("Please make a guess for all responses");d(!0),x(null);try{let e=Object.fromEntries(i);await y.uE.post("/api/game/".concat(s.code,"/guess"),{playerId:a,guesses:e},{},{maxRetries:2,retryDelay:1e3}),p(!0),h.success("Guesses submitted successfully!"),l()}catch(t){console.error("Error submitting guesses:",t);let e=(0,y.u1)(t);x(e),h.error(e)}finally{d(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"Who Said What?"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600 text-center mb-5 sm:mb-6",children:"Match each response to the player you think wrote it"}),u?(0,r.jsxs)("div",{className:"text-center py-6 sm:py-8",children:[(0,r.jsx)("div",{className:"text-5xl sm:text-6xl mb-4",children:"✅"}),(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Guesses Submitted!"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-5 sm:mb-6",children:"Waiting for other players to submit their guesses..."}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"animate-pulse text-xl sm:text-2xl",children:"⏳"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg font-semibold text-gray-800",children:[N," / ",v," players submitted"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"bg-purple-600 h-full transition-all duration-500 ease-out",style:{width:"".concat(N/v*100,"%")}})})]})]}):(0,r.jsxs)("form",{onSubmit:C,className:"space-y-3 sm:space-y-4",children:[(0,r.jsx)("div",{className:"space-y-3 sm:space-y-4",children:f.map((e,t)=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("p",{className:"text-xs sm:text-sm font-semibold text-gray-500 mb-2",children:["Response ",t+1]}),(0,r.jsxs)("p",{className:"text-gray-800 text-sm sm:text-base md:text-lg break-words",children:['"',a.text,'"']})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"guess-".concat(s),className:"block text-sm font-medium text-gray-700 mb-2",children:"Who said this?"}),(0,r.jsxs)("select",{id:"guess-".concat(s),value:i.get(s)||"",onChange:e=>{var t;return t=e.target.value,void c(e=>{let r=new Map(e);return r.set(s,t),r})},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base min-h-[44px]",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a player..."}),j.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nickname},e.id))]})]})]},s)})}),m&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,r.jsx)("p",{className:"text-red-600 text-xs sm:text-sm",children:m})}),(0,r.jsx)("button",{type:"submit",disabled:o||i.size!==f.length,className:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 active:bg-purple-800 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed text-base sm:text-lg min-h-[44px]",children:o?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-3 text-white"}),"Submitting..."]}):"Submit Guesses"}),i.size>0&&i.size<f.length&&(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 text-center",children:[i.size," / ",f.length," guesses made"]})]}),!u&&N>0&&(0,r.jsx)("div",{className:"mt-3 sm:mt-4 bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 text-center",children:[N," / ",v," players have submitted"]})})]})}function E(e){let{gameSession:t,currentPlayerId:s,onRefresh:a}=e,[l,i]=(0,n.useState)(!1),[c,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(null),x=b(),u=t.rounds[t.currentRound],p=t.hostId===s,h=null==u?void 0:u.results;if(!h)return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-6",children:(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading results..."})})});let g=async()=>{i(!0),m(null);try{await y.uE.post("/api/game/".concat(t.code,"/start-round"),{hostId:s,prompt:"What's the most embarrassing thing that happened to you this week?"},{},{maxRetries:2,retryDelay:1e3}),x.success("Next round started!"),await a()}catch(t){console.error("Error starting next round:",t);let e=(0,y.u1)(t);m(e),x.error(e)}finally{i(!1)}},f=async()=>{if(confirm("Are you sure you want to end the game? This cannot be undone.")){o(!0),m(null);try{await y.uE.post("/api/game/".concat(t.code,"/end"),{hostId:s},{},{maxRetries:1,retryDelay:500}),x.info("Game ended")}catch(t){console.error("Error ending game:",t);let e=(0,y.u1)(t);m(e),x.error(e),o(!1)}}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-5 sm:mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:["Round ",u.roundNumber+1," Results"]}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Here's who said what!"})]}),(0,r.jsx)("div",{className:"space-y-4 sm:space-y-6 mb-6 sm:mb-8",children:h.responses.map((e,s)=>{let a=e.actualAuthor;return(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-4 sm:p-5",children:[(0,r.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,r.jsxs)("p",{className:"text-xs sm:text-sm font-semibold text-purple-600 mb-2",children:["Response ",s+1]}),(0,r.jsxs)("p",{className:"text-sm sm:text-base md:text-lg text-gray-800 font-medium mb-3 break-words",children:['"',e.text,'"']}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl sm:text-2xl",children:"✍️"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg font-bold text-purple-700 truncate",children:["Written by: ",a.nickname]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-purple-100",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:"Who guessed what:"}),(0,r.jsx)("div",{className:"space-y-2",children:Array.from(e.guessedBy.entries()).map(e=>{let[s,n]=e,l=t.players.get(s),i=t.players.get(n),c=n===a.id;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded gap-2 ".concat(c?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-700 min-w-0 flex-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:null==l?void 0:l.nickname})," guessed"," ",(0,r.jsx)("span",{className:"font-semibold",children:null==i?void 0:i.nickname})]}),(0,r.jsx)("span",{className:"text-base sm:text-lg flex-shrink-0",children:c?"✅":"❌"})]},s)})})]})]},e.responseId)})}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-200 rounded-lg p-4 sm:p-6 mb-5 sm:mb-6",children:[(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"\uD83C\uDF7A Drinking Penalties \uD83C\uDF7A"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:Array.from(h.penalties.entries()).sort((e,t)=>t[1]-e[1]).map(e=>{let[a,n]=e,l=t.players.get(a);return l?(0,r.jsx)("div",{className:"p-3 sm:p-4 rounded-lg border-2 ".concat(n>0?"bg-red-100 border-red-300":"bg-green-100 border-green-300"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("p",{className:"font-bold text-sm sm:text-base text-gray-800 truncate",children:[l.nickname,l.id===s&&" (You)"]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:0===n?"Perfect score!":"".concat(n," wrong guess").concat(1!==n?"es":"")})]}),(0,r.jsx)("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:n>0?(0,r.jsxs)("span",{children:["\uD83C\uDF7A".repeat(Math.min(n,5)),n>5&&" \xd7".concat(n)]}):(0,r.jsx)("span",{children:"\uD83C\uDF89"})})]})},a):null})})]}),p&&(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("button",{onClick:g,disabled:l,className:"bg-purple-600 text-white px-6 sm:px-8 py-4 rounded-lg font-bold text-base sm:text-lg hover:bg-purple-700 active:bg-purple-800 transition-all hover:scale-105 shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed disabled:hover:scale-100 min-h-[44px]",children:l?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-2 text-white"}),"Starting Next Round..."]}):"Start Next Round \uD83C\uDFAE"}),d&&(0,r.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-3",children:d})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:f,disabled:l||c,className:"bg-red-600 text-white px-5 sm:px-6 py-3 rounded-lg font-semibold hover:bg-red-700 active:bg-red-800 transition-all disabled:bg-gray-300 disabled:cursor-not-allowed min-h-[44px]",children:c?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(w.A,{size:"md",className:"mr-2 text-white"}),"Ending Game..."]}):"End Game \uD83C\uDFC1"})})]}),!p&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[(0,r.jsx)("span",{className:"animate-pulse text-xl sm:text-2xl",children:"⏳"}),(0,r.jsx)("p",{className:"text-base sm:text-lg",children:"Waiting for host to start the next round..."})]})})]})}function R(e){let{gameSession:t,reason:s}=e,a=Array.from(t.players.values()).map(e=>{let s=0;for(let r of t.rounds)r.results&&(s+=r.results.penalties.get(e.id)||0);return{nickname:e.nickname,totalPenalties:s,isHost:e.isHost}});a.sort((e,t)=>e.totalPenalties-t.totalPenalties);let n=a[0],l=t.rounds.length;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"\uD83C\uDFC1 Game Over! \uD83C\uDFC1"}),(0,r.jsx)("p",{className:"text-sm sm:text-base md:text-lg text-gray-600",children:s}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Total Rounds Played: ",l]})]}),n&&(0,r.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-4 border-yellow-400 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-5xl sm:text-6xl mb-3",children:"\uD83C\uDFC6"}),(0,r.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:[n.nickname," Wins!"]}),(0,r.jsx)("p",{className:"text-sm sm:text-base md:text-lg text-gray-600",children:0===n.totalPenalties?"Perfect score - no wrong guesses!":"Only ".concat(n.totalPenalties," wrong guess").concat(1!==n.totalPenalties?"es":"","!")})]})}),(0,r.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"Final Standings"}),(0,r.jsx)("div",{className:"space-y-2 sm:space-y-3",children:a.map((e,t)=>(0,r.jsx)("div",{className:"p-3 sm:p-4 rounded-lg border-2 ".concat(0===t?"bg-yellow-50 border-yellow-400":1===t?"bg-gray-50 border-gray-400":2===t?"bg-orange-50 border-orange-400":"bg-white border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[(0,r.jsxs)("span",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-600 w-6 sm:w-8 flex-shrink-0",children:["#",t+1]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("p",{className:"font-bold text-sm sm:text-base md:text-lg text-gray-800 truncate",children:[e.nickname,e.isHost&&" \uD83D\uDC51"]}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.totalPenalties," wrong guess",1!==e.totalPenalties?"es":""]})]})]}),(0,r.jsx)("div",{className:"text-2xl sm:text-3xl flex-shrink-0",children:0===t?"\uD83E\uDD47":1===t?"\uD83E\uDD48":2===t?"\uD83E\uDD49":""})]})},e.nickname))})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"\uD83C\uDF7A Total Drinks \uD83C\uDF7A"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:a.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg p-3 sm:p-4 border-2 border-red-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("p",{className:"font-semibold text-sm sm:text-base text-gray-800 truncate flex-1 min-w-0",children:e.nickname}),(0,r.jsx)("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:e.totalPenalties>0?(0,r.jsxs)("span",{children:["\uD83C\uDF7A".repeat(Math.min(e.totalPenalties,5)),e.totalPenalties>5&&" \xd7".concat(e.totalPenalties)]}):(0,r.jsx)("span",{children:"✨"})})]})},e.nickname))})]}),(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-purple-600 text-white px-6 sm:px-8 py-4 rounded-lg font-bold text-base sm:text-lg hover:bg-purple-700 active:bg-purple-800 transition-all hover:scale-105 shadow-lg min-h-[44px]",children:"Play Again \uD83C\uDFAE"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs sm:text-sm",children:"Thanks for playing Who Said That!"})]})]})}function D(){let{gameSession:e,connectionStatus:t,error:s,isGameEnded:a,gameEndedReason:l,refreshGameState:i}=N(),[c,o]=(0,n.useState)(null);return((0,n.useEffect)(()=>{e&&o(localStorage.getItem("player_".concat(e.code)))},[e]),s)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-5xl sm:text-6xl mb-4",children:"⚠️"}),(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Error"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:s}),(0,r.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 active:bg-purple-800 transition-colors min-h-[44px]",children:"Return to Home"})]})}):e?a&&e?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 p-3 sm:p-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 mb-3 sm:mb-4",children:(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 truncate",children:"Who Said That?"}),(0,r.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:["Game Code: ",(0,r.jsx)("span",{className:"font-mono font-bold text-purple-600",children:e.code})]})]})})}),(0,r.jsx)(R,{gameSession:e,reason:l||"Game ended"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 p-3 sm:p-4",children:[(0,r.jsx)(v,{status:t}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 mb-3 sm:mb-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 truncate",children:"Who Said That?"}),(0,r.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:["Game Code: ",(0,r.jsx)("span",{className:"font-mono font-bold text-purple-600",children:e.code})]})]}),(0,r.jsxs)("div",{className:"text-left sm:text-right",children:[(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Round ",e.currentRound]}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 capitalize",children:["Phase: ",e.phase]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 mb-3 sm:mb-4",children:[(0,r.jsxs)("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4",children:["Players (",e.players.size,")"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3",children:Array.from(e.players.values()).map(e=>(0,r.jsxs)("div",{className:"p-2 sm:p-3 rounded-lg border-2 ".concat(e.isConnected?"border-green-500 bg-green-50":"border-gray-300 bg-gray-50"),children:[(0,r.jsxs)("p",{className:"font-semibold text-sm sm:text-base text-gray-800 truncate",children:[e.nickname,e.isHost&&" \uD83D\uDC51"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.isConnected?"\uD83D\uDFE2 Online":"\uD83D\uDD34 Offline"})]},e.id))})]}),"lobby"===e.phase&&(0,r.jsx)(C,{gameCode:e.code,players:e.players,hostId:e.hostId,currentPlayerId:c||void 0}),("prompt"===e.phase||"responding"===e.phase)&&c&&(0,r.jsx)(S,{gameSession:e,currentPlayerId:c,onRefresh:i}),"guessing"===e.phase&&c&&(0,r.jsx)(k,{gameSession:e,currentPlayerId:c,onRefresh:i}),"reveal"===e.phase&&c&&(0,r.jsx)(E,{gameSession:e,currentPlayerId:c,onRefresh:i})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"animate-spin text-5xl sm:text-6xl mb-4",children:"⏳"}),(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Loading Game..."}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Connecting to game session"})]})})}function P(){let e=(0,a.useParams)().code,[t,s]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{s(localStorage.getItem("player_".concat(e))||void 0)},[e]),(0,r.jsx)(j,{gameCode:e,currentPlayerId:t,children:(0,r.jsx)(D,{})})}},3662:()=>{},6443:()=>{},9390:(e,t,s)=>{Promise.resolve().then(s.bind(s,2573))},9443:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);function a(e){let{size:t="md",className:s=""}=e;return(0,r.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"}[t]," ").concat(s),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}}},e=>{e.O(0,[268,624,441,255,358],()=>e(e.s=9390)),_N_E=e.O()}]);