(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{63:(e,t,a)=>{"use strict";var r=a(7260);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},1393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),n=a(63),c=a(2327),o=a(9443);function i(){let e=(0,n.useRouter)(),t=(0,n.useParams)().code,[a,i]=(0,s.useState)(""),[l,u]=(0,s.useState)(""),[m,d]=(0,s.useState)(!1),h=async r=>{if(r.preventDefault(),u(""),!function(e){if(!e||0===e.trim().length)return!1;let t=e.trim();return!(t.length<3)&&!(t.length>20)&&!!/^[a-zA-Z0-9 ]+$/.test(e)}(a))return void(a&&0!==a.trim().length?a.trim().length<3?u("Nickname must be at least 3 characters"):a.trim().length>20?u("Nickname must be 20 characters or less"):/^[a-zA-Z0-9 ]+$/.test(a)?u("Invalid nickname"):u("Nickname can only contain letters, numbers, and spaces"):u("Nickname cannot be empty"));d(!0);try{let r=await c.uE.post("/api/game/".concat(t,"/join"),{nickname:a.trim()},{},{maxRetries:2,retryDelay:1e3});localStorage.setItem("player_".concat(t),r.playerId),e.push("/game/".concat(t))}catch(e){console.error("Error joining game:",e),u((0,c.u1)(e)),d(!1)}};return(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 sm:p-6 bg-gradient-to-br from-purple-50 to-blue-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-6 sm:space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900",children:"Join Game"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg text-gray-600",children:["Game Code: ",(0,r.jsx)("span",{className:"font-mono font-bold text-purple-600",children:t})]})]}),(0,r.jsxs)("form",{onSubmit:h,className:"bg-white rounded-lg shadow-lg p-6 sm:p-8 space-y-5 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your nickname"}),(0,r.jsx)("input",{type:"text",id:"nickname",value:a,onChange:e=>i(e.target.value),placeholder:"Your nickname",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all min-h-[44px] text-base",disabled:m,autoFocus:!0,maxLength:20}),(0,r.jsx)("p",{className:"mt-2 text-xs sm:text-sm text-gray-500",children:"3-20 characters, letters, numbers, and spaces only"})]}),l&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),(0,r.jsx)("button",{type:"submit",disabled:m||!a,className:"w-full bg-purple-600 hover:bg-purple-700 active:bg-purple-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl min-h-[44px]",children:m?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(o.A,{size:"md",className:"mr-3 text-white"}),"Joining..."]}):"Join Game"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"text-gray-600 hover:text-gray-900 active:text-black underline min-h-[44px] inline-flex items-center justify-center px-4",children:"Back to home"})})]})})}},2327:(e,t,a)=>{"use strict";a.d(t,{J5:()=>n,u1:()=>c,uE:()=>o});let r={maxRetries:3,retryDelay:1e3,backoffMultiplier:2,retryableStatuses:[408,429,500,502,503,504]};function s(e){return new Promise(t=>setTimeout(t,e))}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={...r,...a},c=null;for(let a=0;a<=n.maxRetries;a++)try{let r=await fetch(e,t);if(r.ok||!n.retryableStatuses.includes(r.status))return r;let o=Error("HTTP ".concat(r.status,": ").concat(r.statusText));o.status=r.status;try{o.data=await r.json()}catch(e){}if(c=o,a===n.maxRetries)throw o;let i=n.retryDelay*Math.pow(n.backoffMultiplier,a);console.log("Request failed with status ".concat(r.status,". Retrying in ").concat(i,"ms... (attempt ").concat(a+1,"/").concat(n.maxRetries,")")),await s(i)}catch(t){var o;if(c=t,a===n.maxRetries||(o=n.retryableStatuses,!(!t.status||o.includes(t.status))))throw t;let e=n.retryDelay*Math.pow(n.backoffMultiplier,a);console.log("Request failed: ".concat(t.message,". Retrying in ").concat(e,"ms... (attempt ").concat(a+1,"/").concat(n.maxRetries,")")),await s(e)}throw c||Error("Request failed after retries")}function c(e){if(e instanceof Error){var t;if(null==(t=e.data)?void 0:t.error)return e.data.error;if(e.status)switch(e.status){case 400:return"Invalid request. Please check your input.";case 401:return"You are not authorized to perform this action.";case 403:return"Access denied.";case 404:return"Resource not found.";case 408:return"Request timeout. Please try again.";case 409:return"Conflict. The resource already exists or is in an invalid state.";case 429:return"Too many requests. Please slow down and try again.";case 500:return"Server error. Please try again later.";case 502:case 503:case 504:return"Service temporarily unavailable. Please try again."}return e.message||"An unexpected error occurred."}return"An unexpected error occurred."}let o={async post(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,s=await n(e,{method:"POST",headers:{"Content-Type":"application/json",...a.headers},body:JSON.stringify(t),...a},r);if(!s.ok){let e=Error("HTTP ".concat(s.status,": ").concat(s.statusText));e.status=s.status;try{e.data=await s.json()}catch(e){}throw e}return s.json()},async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=await n(e,{method:"GET",...t},a);if(!r.ok){let e=Error("HTTP ".concat(r.status,": ").concat(r.statusText));e.status=r.status;try{e.data=await r.json()}catch(e){}throw e}return r.json()}}},3344:(e,t,a)=>{Promise.resolve().then(a.bind(a,1393))},9443:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(5155);function s(e){let{size:t="md",className:a=""}=e;return(0,r.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"}[t]," ").concat(a),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=3344)),_N_E=e.O()}]);